<div class="p-4">
  <!-- Page Header -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-3xl font-bold text-color">Vendor Rules</h1>
      <p class="text-muted-color mt-1">Automatically rename messy bank descriptions</p>
    </div>
    <p-button
      label="New Rule"
      icon="pi pi-plus"
      (onClick)="openCreateDialog()"
      severity="primary"
    />
  </div>

  <!-- Rules Table -->
  <p-card styleClass="shadow-sm">
    <p-table
      [value]="rules()"
      [loading]="loading()"
      styleClass="p-datatable-sm"
      responsiveLayout="scroll">

      <ng-template pTemplate="header">
        <tr>
          <th>Priority</th>
          <th>If Description Contains...</th>
          <th>Rename To...</th>
          <th class="text-center" style="width: 100px">Action</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-rule>
        <tr>
          <td>
            <span class="text-muted-color">{{ rule.priority }}</span>
          </td>
          <td class="font-mono text-sm px-2 py-1 rounded">
            {{ rule.keyword }}
          </td>
          <td class="font-medium text-primary">
            {{ rule.vendorName }}
          </td>
          <td class="text-center">
            <p-button
              icon="pi pi-trash"
              [text]="true"
              [rounded]="true"
              severity="danger"
              (onClick)="deleteRule(rule)"
              pTooltip="Delete Rule"
              tooltipPosition="top"
            />
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4" class="text-center py-8 text-muted-color">
            No rules found. Create one to start cleaning up your transactions.
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>

  <!-- Create Rule Dialog -->
  <app-vendor-rule-form-dialog
    [visible]="showDialog()"
    (visibleChange)="showDialog.set($event)"
    (save)="onRuleSaved()"
  />

  <!-- Confirmation Dialog -->
  <p-confirmDialog />
</div>
